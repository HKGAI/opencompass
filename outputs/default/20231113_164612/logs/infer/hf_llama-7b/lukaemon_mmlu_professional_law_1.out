11/13 17:52:33 - OpenCompass - INFO - Task [hf_llama-7b/lukaemon_mmlu_professional_law_1]
You are using the default legacy behaviour of the <class 'transformers.models.llama.tokenization_llama.LlamaTokenizer'>. This is expected, and simply means that the `legacy` (previous) behavior will be used so nothing changes for you. If you want to use the new behaviour, set `legacy=False`. This should only be set if you understand what it means, and thouroughly read the reason why this was added as explained in https://github.com/huggingface/transformers/pull/24565
11/13 17:52:34 - OpenCompass - WARNING - pad_token_id is not set for the tokenizer.
11/13 17:52:34 - OpenCompass - WARNING - Using eos_token_id </s> as pad_token_id.
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|█████     | 1/2 [00:03<00:03,  3.58s/it]Loading checkpoint shards: 100%|██████████| 2/2 [00:04<00:00,  2.06s/it]Loading checkpoint shards: 100%|██████████| 2/2 [00:04<00:00,  2.29s/it]
11/13 17:52:42 - OpenCompass - INFO - Start inferencing [hf_llama-7b/lukaemon_mmlu_professional_law_1]
  0%|          | 0/767 [00:00<?, ?it/s]100%|██████████| 767/767 [00:00<00:00, 5256586.88it/s]
Token indices sequence length is longer than the specified maximum sequence length for this model (2179 > 2048). Running this sequence through the model will result in indexing errors
[2023-11-13 17:52:47,138] [opencompass.openicl.icl_inferencer.icl_ppl_inferencer] [INFO] Calculating PPL for prompts labeled 'A'
  0%|          | 0/48 [00:00<?, ?it/s]  2%|▏         | 1/48 [00:03<02:22,  3.03s/it]  4%|▍         | 2/48 [00:05<01:53,  2.46s/it]  6%|▋         | 3/48 [00:07<01:40,  2.22s/it]  8%|▊         | 4/48 [00:08<01:32,  2.10s/it] 10%|█         | 5/48 [00:10<01:28,  2.05s/it] 12%|█▎        | 6/48 [00:12<01:24,  2.02s/it] 15%|█▍        | 7/48 [00:14<01:21,  1.98s/it] 17%|█▋        | 8/48 [00:16<01:18,  1.96s/it] 19%|█▉        | 9/48 [00:18<01:15,  1.94s/it] 21%|██        | 10/48 [00:20<01:13,  1.93s/it] 23%|██▎       | 11/48 [00:22<01:11,  1.94s/it] 25%|██▌       | 12/48 [00:24<01:08,  1.91s/it] 27%|██▋       | 13/48 [00:26<01:07,  1.92s/it] 29%|██▉       | 14/48 [00:28<01:05,  1.91s/it] 31%|███▏      | 15/48 [00:30<01:03,  1.93s/it] 33%|███▎      | 16/48 [00:31<01:01,  1.93s/it] 35%|███▌      | 17/48 [00:33<00:59,  1.93s/it] 38%|███▊      | 18/48 [00:35<00:57,  1.93s/it] 40%|███▉      | 19/48 [00:37<00:56,  1.95s/it] 42%|████▏     | 20/48 [00:39<00:53,  1.91s/it] 44%|████▍     | 21/48 [00:41<00:51,  1.92s/it] 46%|████▌     | 22/48 [00:43<00:50,  1.93s/it] 48%|████▊     | 23/48 [00:45<00:48,  1.92s/it] 50%|█████     | 24/48 [00:47<00:46,  1.92s/it] 52%|█████▏    | 25/48 [00:49<00:44,  1.92s/it] 54%|█████▍    | 26/48 [00:51<00:42,  1.92s/it] 56%|█████▋    | 27/48 [00:53<00:40,  1.93s/it] 58%|█████▊    | 28/48 [00:55<00:38,  1.91s/it] 60%|██████    | 29/48 [00:56<00:35,  1.89s/it] 62%|██████▎   | 30/48 [00:58<00:34,  1.90s/it] 65%|██████▍   | 31/48 [01:00<00:32,  1.91s/it] 67%|██████▋   | 32/48 [01:02<00:30,  1.90s/it] 69%|██████▉   | 33/48 [01:04<00:28,  1.92s/it] 71%|███████   | 34/48 [01:06<00:26,  1.90s/it] 73%|███████▎  | 35/48 [01:08<00:24,  1.89s/it] 75%|███████▌  | 36/48 [01:10<00:22,  1.88s/it] 77%|███████▋  | 37/48 [01:12<00:20,  1.88s/it] 79%|███████▉  | 38/48 [01:14<00:19,  1.92s/it] 81%|████████▏ | 39/48 [01:15<00:17,  1.91s/it] 83%|████████▎ | 40/48 [01:17<00:15,  1.89s/it] 85%|████████▌ | 41/48 [01:19<00:13,  1.91s/it] 88%|████████▊ | 42/48 [01:21<00:11,  1.94s/it] 90%|████████▉ | 43/48 [01:23<00:09,  1.97s/it] 92%|█████████▏| 44/48 [01:25<00:07,  1.96s/it] 94%|█████████▍| 45/48 [01:27<00:05,  1.96s/it] 96%|█████████▌| 46/48 [01:29<00:03,  1.94s/it] 98%|█████████▊| 47/48 [01:31<00:01,  1.94s/it]100%|██████████| 48/48 [01:33<00:00,  1.89s/it]100%|██████████| 48/48 [01:33<00:00,  1.94s/it]
[2023-11-13 17:54:24,468] [opencompass.openicl.icl_inferencer.icl_ppl_inferencer] [INFO] Calculating PPL for prompts labeled 'B'
  0%|          | 0/48 [00:00<?, ?it/s]  2%|▏         | 1/48 [00:01<01:29,  1.90s/it]  4%|▍         | 2/48 [00:03<01:27,  1.89s/it]  6%|▋         | 3/48 [00:05<01:26,  1.92s/it]  8%|▊         | 4/48 [00:07<01:24,  1.92s/it] 10%|█         | 5/48 [00:09<01:22,  1.93s/it] 12%|█▎        | 6/48 [00:11<01:21,  1.94s/it] 15%|█▍        | 7/48 [00:13<01:18,  1.92s/it] 17%|█▋        | 8/48 [00:15<01:16,  1.92s/it] 19%|█▉        | 9/48 [00:17<01:14,  1.91s/it] 21%|██        | 10/48 [00:19<01:12,  1.91s/it] 23%|██▎       | 11/48 [00:21<01:11,  1.93s/it] 25%|██▌       | 12/48 [00:22<01:08,  1.90s/it] 27%|██▋       | 13/48 [00:24<01:06,  1.91s/it] 29%|██▉       | 14/48 [00:26<01:04,  1.91s/it] 31%|███▏      | 15/48 [00:28<01:03,  1.92s/it] 33%|███▎      | 16/48 [00:30<01:01,  1.92s/it] 35%|███▌      | 17/48 [00:32<00:59,  1.93s/it] 38%|███▊      | 18/48 [00:34<00:57,  1.93s/it] 40%|███▉      | 19/48 [00:36<00:56,  1.95s/it] 42%|████▏     | 20/48 [00:38<00:53,  1.91s/it] 44%|████▍     | 21/48 [00:40<00:51,  1.92s/it] 46%|████▌     | 22/48 [00:42<00:50,  1.93s/it] 48%|████▊     | 23/48 [00:44<00:48,  1.93s/it] 50%|█████     | 24/48 [00:46<00:46,  1.92s/it] 52%|█████▏    | 25/48 [00:48<00:44,  1.92s/it] 54%|█████▍    | 26/48 [00:49<00:42,  1.93s/it] 56%|█████▋    | 27/48 [00:51<00:40,  1.93s/it] 58%|█████▊    | 28/48 [00:53<00:38,  1.92s/it] 60%|██████    | 29/48 [00:55<00:35,  1.89s/it] 62%|██████▎   | 30/48 [00:57<00:34,  1.90s/it] 65%|██████▍   | 31/48 [00:59<00:32,  1.91s/it] 67%|██████▋   | 32/48 [01:01<00:30,  1.90s/it] 69%|██████▉   | 33/48 [01:03<00:28,  1.92s/it] 71%|███████   | 34/48 [01:05<00:26,  1.90s/it] 73%|███████▎  | 35/48 [01:07<00:24,  1.89s/it] 75%|███████▌  | 36/48 [01:08<00:22,  1.88s/it] 77%|███████▋  | 37/48 [01:10<00:20,  1.88s/it] 79%|███████▉  | 38/48 [01:12<00:19,  1.92s/it] 81%|████████▏ | 39/48 [01:14<00:17,  1.91s/it] 83%|████████▎ | 40/48 [01:16<00:15,  1.89s/it] 85%|████████▌ | 41/48 [01:18<00:13,  1.91s/it] 88%|████████▊ | 42/48 [01:20<00:11,  1.94s/it] 90%|████████▉ | 43/48 [01:22<00:09,  1.95s/it] 92%|█████████▏| 44/48 [01:24<00:07,  1.95s/it] 94%|█████████▍| 45/48 [01:26<00:05,  1.95s/it] 96%|█████████▌| 46/48 [01:28<00:03,  1.93s/it] 98%|█████████▊| 47/48 [01:30<00:01,  1.94s/it]100%|██████████| 48/48 [01:31<00:00,  1.89s/it]100%|██████████| 48/48 [01:31<00:00,  1.92s/it]
[2023-11-13 17:56:00,491] [opencompass.openicl.icl_inferencer.icl_ppl_inferencer] [INFO] Calculating PPL for prompts labeled 'C'
  0%|          | 0/48 [00:00<?, ?it/s]  2%|▏         | 1/48 [00:01<01:29,  1.90s/it]  4%|▍         | 2/48 [00:03<01:27,  1.90s/it]  6%|▋         | 3/48 [00:05<01:26,  1.92s/it]  8%|▊         | 4/48 [00:07<01:24,  1.92s/it] 10%|█         | 5/48 [00:09<01:22,  1.93s/it] 12%|█▎        | 6/48 [00:11<01:21,  1.94s/it] 15%|█▍        | 7/48 [00:13<01:18,  1.93s/it] 17%|█▋        | 8/48 [00:15<01:16,  1.92s/it] 19%|█▉        | 9/48 [00:17<01:14,  1.91s/it] 21%|██        | 10/48 [00:19<01:12,  1.91s/it] 23%|██▎       | 11/48 [00:21<01:11,  1.93s/it] 25%|██▌       | 12/48 [00:22<01:08,  1.90s/it] 27%|██▋       | 13/48 [00:24<01:06,  1.91s/it] 29%|██▉       | 14/48 [00:26<01:04,  1.91s/it] 31%|███▏      | 15/48 [00:28<01:03,  1.92s/it] 33%|███▎      | 16/48 [00:30<01:01,  1.93s/it] 35%|███▌      | 17/48 [00:32<00:59,  1.93s/it] 38%|███▊      | 18/48 [00:34<00:57,  1.93s/it] 40%|███▉      | 19/48 [00:36<00:56,  1.95s/it] 42%|████▏     | 20/48 [00:38<00:53,  1.91s/it] 44%|████▍     | 21/48 [00:40<00:51,  1.92s/it] 46%|████▌     | 22/48 [00:42<00:50,  1.93s/it] 48%|████▊     | 23/48 [00:44<00:48,  1.93s/it] 50%|█████     | 24/48 [00:46<00:46,  1.93s/it] 52%|█████▏    | 25/48 [00:48<00:44,  1.92s/it] 54%|█████▍    | 26/48 [00:49<00:42,  1.93s/it] 56%|█████▋    | 27/48 [00:51<00:40,  1.93s/it] 58%|█████▊    | 28/48 [00:53<00:38,  1.92s/it] 60%|██████    | 29/48 [00:55<00:35,  1.89s/it] 62%|██████▎   | 30/48 [00:57<00:34,  1.90s/it] 65%|██████▍   | 31/48 [00:59<00:32,  1.91s/it] 67%|██████▋   | 32/48 [01:01<00:30,  1.90s/it] 69%|██████▉   | 33/48 [01:03<00:28,  1.92s/it] 71%|███████   | 34/48 [01:05<00:26,  1.90s/it] 73%|███████▎  | 35/48 [01:07<00:24,  1.89s/it] 75%|███████▌  | 36/48 [01:08<00:22,  1.88s/it] 77%|███████▋  | 37/48 [01:10<00:20,  1.89s/it] 79%|███████▉  | 38/48 [01:12<00:19,  1.92s/it] 81%|████████▏ | 39/48 [01:14<00:17,  1.91s/it] 83%|████████▎ | 40/48 [01:16<00:15,  1.89s/it] 85%|████████▌ | 41/48 [01:18<00:13,  1.91s/it] 88%|████████▊ | 42/48 [01:20<00:11,  1.94s/it] 90%|████████▉ | 43/48 [01:22<00:09,  1.95s/it] 92%|█████████▏| 44/48 [01:24<00:07,  1.95s/it] 94%|█████████▍| 45/48 [01:26<00:05,  1.95s/it] 96%|█████████▌| 46/48 [01:28<00:03,  1.93s/it] 98%|█████████▊| 47/48 [01:30<00:01,  1.94s/it]100%|██████████| 48/48 [01:32<00:00,  1.89s/it]100%|██████████| 48/48 [01:32<00:00,  1.92s/it]
[2023-11-13 17:57:36,612] [opencompass.openicl.icl_inferencer.icl_ppl_inferencer] [INFO] Calculating PPL for prompts labeled 'D'
  0%|          | 0/48 [00:00<?, ?it/s]  2%|▏         | 1/48 [00:01<01:29,  1.90s/it]  4%|▍         | 2/48 [00:03<01:27,  1.90s/it]  6%|▋         | 3/48 [00:05<01:26,  1.92s/it]  8%|▊         | 4/48 [00:07<01:24,  1.92s/it] 10%|█         | 5/48 [00:09<01:22,  1.93s/it] 12%|█▎        | 6/48 [00:11<01:21,  1.94s/it] 15%|█▍        | 7/48 [00:13<01:18,  1.92s/it] 17%|█▋        | 8/48 [00:15<01:16,  1.92s/it] 19%|█▉        | 9/48 [00:17<01:14,  1.91s/it] 21%|██        | 10/48 [00:19<01:12,  1.91s/it] 23%|██▎       | 11/48 [00:21<01:11,  1.93s/it] 25%|██▌       | 12/48 [00:22<01:08,  1.90s/it] 27%|██▋       | 13/48 [00:24<01:06,  1.91s/it] 29%|██▉       | 14/48 [00:26<01:04,  1.91s/it] 31%|███▏      | 15/48 [00:28<01:03,  1.93s/it] 33%|███▎      | 16/48 [00:30<01:02,  1.94s/it] 35%|███▌      | 17/48 [00:32<01:00,  1.94s/it] 38%|███▊      | 18/48 [00:34<00:58,  1.94s/it] 40%|███▉      | 19/48 [00:36<00:56,  1.96s/it] 42%|████▏     | 20/48 [00:38<00:53,  1.92s/it] 44%|████▍     | 21/48 [00:40<00:51,  1.92s/it] 46%|████▌     | 22/48 [00:42<00:50,  1.93s/it] 48%|████▊     | 23/48 [00:44<00:48,  1.93s/it] 50%|█████     | 24/48 [00:46<00:46,  1.93s/it] 52%|█████▏    | 25/48 [00:48<00:44,  1.92s/it] 54%|█████▍    | 26/48 [00:50<00:42,  1.93s/it] 56%|█████▋    | 27/48 [00:52<00:40,  1.93s/it] 58%|█████▊    | 28/48 [00:53<00:38,  1.92s/it] 60%|██████    | 29/48 [00:55<00:36,  1.89s/it] 62%|██████▎   | 30/48 [00:57<00:34,  1.90s/it] 65%|██████▍   | 31/48 [00:59<00:32,  1.91s/it] 67%|██████▋   | 32/48 [01:01<00:30,  1.90s/it] 69%|██████▉   | 33/48 [01:03<00:28,  1.92s/it] 71%|███████   | 34/48 [01:05<00:26,  1.90s/it] 73%|███████▎  | 35/48 [01:07<00:24,  1.89s/it] 75%|███████▌  | 36/48 [01:08<00:22,  1.88s/it] 77%|███████▋  | 37/48 [01:10<00:20,  1.89s/it] 79%|███████▉  | 38/48 [01:12<00:19,  1.92s/it] 81%|████████▏ | 39/48 [01:14<00:17,  1.91s/it] 83%|████████▎ | 40/48 [01:16<00:15,  1.90s/it] 85%|████████▌ | 41/48 [01:18<00:13,  1.91s/it] 88%|████████▊ | 42/48 [01:20<00:11,  1.94s/it] 90%|████████▉ | 43/48 [01:22<00:09,  1.95s/it] 92%|█████████▏| 44/48 [01:24<00:07,  1.95s/it] 94%|█████████▍| 45/48 [01:26<00:05,  1.95s/it] 96%|█████████▌| 46/48 [01:28<00:03,  1.93s/it] 98%|█████████▊| 47/48 [01:30<00:01,  1.94s/it]100%|██████████| 48/48 [01:32<00:00,  1.89s/it]100%|██████████| 48/48 [01:32<00:00,  1.92s/it]
11/13 17:59:08 - OpenCompass - INFO - time elapsed: 395.08s
